<div id="gmap" class="map"></div>

<script>
    var defaultZoom = 15;

    var mapOptions = {
        center: new google.maps.LatLng(49.431133, 32.04923),
        zoom: defaultZoom,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        scrollwheel: false
    };
    var map = new google.maps.Map(document.getElementById('gmap'),mapOptions);

    var mylat = document.getElementById("organization_lat").value;
    var mylng = document.getElementById("organization_lng").value;
    if (jQuery.isEmptyObject(mylat)) {
        var mylat = '49.431133';
        var mylng = '32.04923';
        var defaultZoom = 15;
    }

    var centrePoint = new google.maps.LatLng(mylat, mylng);
    map.setCenter(centrePoint);
    map.setZoom(defaultZoom);

    marker = new google.maps.Marker({
        map: map,
        draggable: true,
        animation: google.maps.Animation.DROP,
        position: centrePoint
    });

    var defaultImage = new google.maps.MarkerImage(
            "http://maps.gstatic.com/mapfiles/place_api/icons/geocode-71.png",
            new google.maps.Size(71, 71),
            new google.maps.Point(0, 0),
            new google.maps.Point(17, 34),
            new google.maps.Size(35, 35));
    marker.setIcon(defaultImage);

    google.maps.event.addListener(marker, 'click', toggleBounce);

    var infowindow = new google.maps.InfoWindow();

    google.maps.event.addListener(marker, "dragend", function() {
        var point = marker.getPosition();
        map.panTo(point);
        document.getElementById("organization_lat").value = point.lat();
        document.getElementById("organization_lng").value = point.lng();
        infowindow.close();
        marker.setIcon(defaultImage);
    });
    var place;

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
        place = autocomplete.getPlace();
        marker.setPosition(place.geometry.location);
        map.panTo(place.geometry.location);
        map.setZoom(16);
        document.getElementById("organization_lat").value = place.geometry.location.lat();
        document.getElementById("organization_lng").value = place.geometry.location.lng();

        var image = new google.maps.MarkerImage(
                place.icon,
                new google.maps.Size(71, 71),
                new google.maps.Point(0, 0),
                new google.maps.Point(17, 34),
                new google.maps.Size(35, 35));
        marker.setIcon(image);
        marker.setPosition(place.geometry.location);

        infowindow.open(map, marker);
    });

    function toggleBounce() {
        if (marker.getAnimation() != null) {
            marker.setAnimation(null);
        } else {
            marker.setAnimation(google.maps.Animation.BOUNCE);
        }
    }

</script>